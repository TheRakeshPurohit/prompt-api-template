import { CliUx } from '@oclif/core';
import { PluginInstance } from '@steamship/client';
import { getHandle } from './get-handle.js';
export async function getPluginInstance(params) {
    const handle = await getHandle({
        provided: params.providedHandle,
        config: params.config,
        type: 'instance'
    });
    if (!params.plugin) {
        CliUx.ux.error('Unable to load plugin instance - plugin missing.');
        CliUx.ux.exit(-1);
    }
    const instanceR = await PluginInstance.get(params.client, {
        pluginHandle: params.plugin.handle,
        handle: handle
    });
    if (!instanceR.output) {
        CliUx.ux.error('Unable to load plugin instance.');
        CliUx.ux.exit(-1);
    }
    return instanceR.output;
}
