import { Command, Flags } from '@oclif/core';
import { PackageInstance, Steamship } from '@steamship/client';
import { deleteObject } from '../../../helpers/delete-object.js';
import { getConfiguration } from '../../../wizards/get-config.js';
import { getPackageInstance } from '../../../wizards/get-package-instance.js';
import { getPackage } from '../../../wizards/get-package.js';
export default class Delete extends Command {
    static description = 'Delete an app.';
    static examples = [
        'ship package:instance:delete --instance <instanceHandle>',
        'ship package:instance:delete --package <packageHandle> --instance <instanceHandle>'
    ];
    static flags = {
        package: Flags.string({ char: 'a', description: 'the Package handle' }),
        instance: Flags.string({ char: 'i', description: 'the Package Instance handle' })
    };
    static args = [];
    async run() {
        const { args, flags } = await this.parse(Delete);
        const client = new Steamship();
        const config = await getConfiguration({});
        const pkg = (await getPackage({ client, config, providedHandle: flags.package }));
        const instance = (await getPackageInstance({
            client,
            config,
            package: pkg,
            providedHandle: flags.instance
        }));
        await deleteObject(PackageInstance, { id: instance.id, appHandle: pkg.handle }, 'Package Instance');
    }
}
