import { CliUx, Command } from '@oclif/core';
import { User } from '@steamship/client';
import { getAuthedClient } from '../../../helpers/get-client.js';
export default class Set extends Command {
    static description = 'Sets your user handle.';
    static examples = ['ship user:handle:set <new-handle>'];
    static flags = {};
    static args = [{ name: 'handle' }];
    async run() {
        const { args, flags } = await this.parse(Set);
        const client = await getAuthedClient();
        if (!args.handle) {
            CliUx.ux.error('Please provide a new handle.');
        }
        const user = (await User.current(client)).output;
        if (!user) {
            CliUx.ux.error('Unable to look up user.');
        }
        const resp = await user.update({ handle: args.handle });
        CliUx.ux.info(`User handle updated to: ${resp.output?.handle}`);
    }
}
