import { CliUx, Command } from '@oclif/core';
import { loadConfiguration } from '@steamship/client';
import { getAccount } from '../../helpers/account-api.js';
export default class Info extends Command {
    static description = 'Displays information about the current Steamship CLI and authentication';
    static examples = ['ship user:info'];
    static flags = {};
    static args = [];
    async run() {
        CliUx.ux.log(`Steamship CLI v${this.config.version}`);
        CliUx.ux.log(`------------------------`);
        try {
            const config = await loadConfiguration();
            CliUx.ux.log(`Steamship Auth Profile: ${config.profile || ''}`);
            CliUx.ux.log(`Steamship API Domain:   ${config.apiBase || 'Not set'}`);
            CliUx.ux.log(`Steamship Package Domain:   ${config.appBase || 'Not set'}`);
            CliUx.ux.log(`Steamship Web Console:  ${config.webBase || 'Not set'}`);
            CliUx.ux.log(`Access Token:           ${config.apiKey || 'Not set'}`);
        }
        catch {
            CliUx.ux.log('No configuration or authentication. See `ship login help` for more info');
            return;
        }
        CliUx.ux.log(``);
        CliUx.ux.log(`User Info`);
        CliUx.ux.log(`------------------------`);
        try {
            const userInfo = await getAccount();
            CliUx.ux.log(`Handle:         ${userInfo.handle}`);
            CliUx.ux.log(`Name:           ${userInfo.name || ''}`);
            CliUx.ux.log(`Email:          ${userInfo.email || ''}`);
        }
        catch (err) {
            CliUx.ux.log(`Local authentication exists, but could not authenticate against the server.`);
        }
        CliUx.ux.log(``);
    }
}
